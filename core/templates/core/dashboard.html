{% extends 'base/base.html' %}

{% block title %}Bienvenido - SIGETIC{% endblock %}

{% block extra_css %}
<style>
    .dashboard-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 24px;
        margin-top: 30px;
    }
    
    .dashboard-card {
        background: linear-gradient(135deg, #c1121f 0%, #a1101a 100%);
        padding: 30px;
        border-radius: 16px;
        color: white;
        text-decoration: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(193, 18, 31, 0.2);
        position: relative;
        overflow: hidden;
        min-height: 180px;
    }
    
    .dashboard-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="2"/></svg>');
        opacity: 0.3;
    }
    
    .dashboard-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 8px 24px rgba(193, 18, 31, 0.4);
    }
    
    .dashboard-card-icon {
        width: 64px;
        height: 64px;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
        z-index: 1;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    .dashboard-card-icon svg {
        width: 32px;
        height: 32px;
        stroke: white;
    }
    
    .dashboard-card-title {
        font-size: 20px;
        font-weight: 700;
        margin-bottom: 8px;
        z-index: 1;
    }
    
    .dashboard-card-subtitle {
        font-size: 14px;
        opacity: 0.9;
        z-index: 1;
    }
    
    .dashboard-section {
        margin-bottom: 40px;
    }
    
    .dashboard-section-title {
        color: #1a1a1a;
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 2px solid #f0f0f0;
    }
</style>
{% endblock %}

{% block content %}
<div class="content-header">
    <h2>¡Bienvenido, {{ user.get_full_name|default:user.username }}!</h2>
    <p>Selecciona una opción para comenzar</p>
</div>

<div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
    <!-- Sección: Acciones Principales -->
    <div class="dashboard-section">
        <h3 class="dashboard-section-title">Acciones Principales</h3>
        <div class="dashboard-cards">
            <a href="{% url 'ticket:create_ticket' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="9" y1="15" x2="15" y2="15"></line>
                    </svg>
                </div>
                <div class="dashboard-card-title">Crear Ticket</div>
                <div class="dashboard-card-subtitle">Crea una nueva solicitud de soporte</div>
            </a>
            
            <a href="{% url 'ticket:mis_tickets' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
                <div class="dashboard-card-title">Mis Tickets</div>
                <div class="dashboard-card-subtitle">Ver todos los tickets que creé</div>
            </a>
            
            {% if user.rol == 'jefe_soporte' or user.rol == 'ingeniero_soporte' %}
            <a href="{% url 'ticket:tickets_asignados' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 11l3 3L22 4"></path>
                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                    </svg>
                </div>
                <div class="dashboard-card-title">Mis Tickets Asignados</div>
                <div class="dashboard-card-subtitle">Tickets asignados a mí</div>
            </a>
            {% endif %}
            
            {% if user.is_superuser %}
            <a href="{% url 'ticket:ticket_admin_list' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                        <line x1="12" y1="11" x2="12" y2="17"></line>
                        <line x1="9" y1="14" x2="15" y2="14"></line>
                    </svg>
                </div>
                <div class="dashboard-card-title">Tickets Admin</div>
                <div class="dashboard-card-subtitle">Gestión administrativa de tickets</div>
            </a>
            {% endif %}
        </div>
    </div>
    
    <!-- Sección: Administración (solo para superuser) -->
    {% if user.is_superuser %}
    <div class="dashboard-section">
        <h3 class="dashboard-section-title">Administración</h3>
        <div class="dashboard-cards">
            <a href="{% url 'sede:list' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                </div>
                <div class="dashboard-card-title">Sedes</div>
                <div class="dashboard-card-subtitle">Gestionar sedes</div>
            </a>
            
            <a href="{% url 'categoria:list' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 7h16M4 12h16M4 17h16"></path>
                    </svg>
                </div>
                <div class="dashboard-card-title">Categorías</div>
                <div class="dashboard-card-subtitle">Gestionar categorías</div>
            </a>
            
            <a href="{% url 'categoria:subcategoria_list' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 13h6m-3-3v6m-9 1V7a2 2 0 0 1 2-2h6l2 2h6a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    </svg>
                </div>
                <div class="dashboard-card-title">Subcategorías</div>
                <div class="dashboard-card-subtitle">Gestionar subcategorías</div>
            </a>
            
            <a href="{% url 'cargo:list' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
                <div class="dashboard-card-title">Cargos</div>
                <div class="dashboard-card-subtitle">Gestionar cargos</div>
            </a>
            
            <a href="{% url 'dependencia:list' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                        <polyline points="7 3 7 8 15 8"></polyline>
                    </svg>
                </div>
                <div class="dashboard-card-title">Dependencias</div>
                <div class="dashboard-card-subtitle">Gestionar dependencias</div>
            </a>
            
            <a href="{% url 'accounts:list' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <div class="dashboard-card-title">Usuarios</div>
                <div class="dashboard-card-subtitle">Gestionar usuarios</div>
            </a>
            
            <a href="{% url 'accounts:telegram_grupos_list' %}" class="dashboard-card">
                <div class="dashboard-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                    </svg>
                </div>
                <div class="dashboard-card-title">Grupos Telegram</div>
                <div class="dashboard-card-subtitle">Gestionar grupos por sede</div>
            </a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
